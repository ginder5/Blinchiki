<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –±–ª–∏–Ω–æ–≤</title>

<link rel="manifest" href="manifest.json">

<style>
:root {
    --olive: #7a8f5c;
    --olive-dark: #556b3a;
    --beige: #f6f7f2;
    --accent: #e8efdc;
}

body {
    margin: 0;
    font-family: system-ui, sans-serif;
    background: var(--beige);
    color: var(--olive-dark);
}

.app {
    padding: 20px;
    max-width: 900px;
    margin: auto;
}

h1 {
    text-align: center;
    font-weight: 600;
    margin-bottom: 24px;
}

.layout {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
}

.card {
    background: white;
    border-radius: 18px;
    padding: 20px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.08);
}

.results {
    background: var(--accent);
    opacity: 0;
    transform: translateY(10px) scale(0.98);
    transition: all 0.35s ease;
}

.results.show {
    opacity: 1;
    transform: translateY(0) scale(1);
}

label {
    font-size: 14px;
    margin-top: 12px;
    display: block;
}

select, input, button {
    width: 100%;
    margin-top: 6px;
    padding: 10px;
    border-radius: 10px;
    border: 1px solid #cdd7bf;
    font-size: 15px;
}

button {
    margin-top: 18px;
    background: var(--olive);
    color: white;
    border: none;
    cursor: pointer;
    transition: background 0.25s ease, transform 0.15s ease;
}

button:hover {
    background: var(--olive-dark);
}

button:active {
    transform: scale(0.97);
}

.hidden {
    display: none;
}

.result-item {
    margin-bottom: 8px;
    font-size: 15px;
}

@media (max-width: 700px) {
    .layout {
        grid-template-columns: 1fr;
    }
}
</style>
</head>

<body>
<div class="app">
    <h1>ü•û –ë–ª–∏–Ω—ã</h1>

    <div class="layout">
        <div class="card">
            <label>–û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç</label>
            <select id="ingredient">
                <option value="milk">–ú–æ–ª–æ–∫–æ</option>
                <option value="flour">–ú—É–∫–∞</option>
                <option value="sugar">–°–∞—Ö–∞—Ä</option>
                <option value="butter">–ú–∞—Å–ª–æ</option>
                <option value="eggs">–Ø–π—Ü–∞</option>
            </select>

            <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</label>
            <input type="number" id="amount">

            <div id="milkUnits" class="hidden">
                <label>–ï–¥–∏–Ω–∏—Ü—ã –º–æ–ª–æ–∫–∞</label>
                <select id="milkUnit">
                    <option value="g">–≥—Ä–∞–º–º—ã</option>
                    <option value="l">–ª–∏—Ç—Ä—ã</option>
                </select>
            </div>

            <label>–°–æ—Ä—Ç —è–∏—Ü</label>
            <select id="eggType">
                <option value="55">–°1</option>
                <option value="65">–°0</option>
                <option value="45">–°2</option>
                <option value="35">–°3</option>
            </select>

            <button id="calcBtn">–í—ã—á–∏—Å–ª–∏—Ç—å</button>
        </div>

        <div class="card results" id="results"></div>
    </div>
</div>

<script>
const base = {
    milk: 350,
    flour: 125,
    sugar: 10,
    butter: 20,
    eggs: 110
};

function roundHalf(x) {
    return Math.round(x * 2) / 2;
}

const ingredientSelect = document.getElementById("ingredient");
const milkUnitsBlock = document.getElementById("milkUnits");
const results = document.getElementById("results");

ingredientSelect.addEventListener("change", () => {
    milkUnitsBlock.classList.toggle(
        "hidden",
        ingredientSelect.value !== "milk"
    );
});

document.getElementById("calcBtn").addEventListener("click", () => {
    const ingredient = ingredientSelect.value;
    let amount = parseFloat(document.getElementById("amount").value);
    const milkUnit = document.getElementById("milkUnit").value;
    const eggWeight = parseFloat(document.getElementById("eggType").value);

    if (!amount || amount <= 0) return;

    if (ingredient === "milk" && milkUnit === "l") {
        amount *= 1000;
    }

    const factor = amount / base[ingredient];
    let html = "";

    const milkG = base.milk * factor;
    html += `<div class="result-item">–ú–æ–ª–æ–∫–æ: ${milkG.toFixed(0)} –≥ / ${(milkG/1000).toFixed(2)} –ª</div>`;
    html += `<div class="result-item">–ú—É–∫–∞: ${(base.flour * factor).toFixed(1)} –≥</div>`;
    html += `<div class="result-item">–°–∞—Ö–∞—Ä: ${(base.sugar * factor).toFixed(1)} –≥</div>`;
    html += `<div class="result-item">–ú–∞—Å–ª–æ: ${(base.butter * factor).toFixed(1)} –≥</div>`;

    const eggs = roundHalf((base.eggs * factor) / eggWeight);
    html += `<div class="result-item">–Ø–π—Ü–∞: ${eggs} —à—Ç</div>`;

    results.innerHTML = html;
    results.classList.remove("show");
    void results.offsetWidth;
    results.classList.add("show");
});

if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("service-worker.js");
}
</script>
</body>
</html>
